# Basic Settings

# Listen on port 9999 for command control connections
port 9999

# Set system Geometry to 1024x576
geometry 1024 576 ARGB

# Set system frame rate to 24
frame rate 24

# Set output control socket
socket /tmp/mixer1

# Set feed idle time - feed 0 will always be idle. If no file is given,
# idle image will be all black.
#feed idle 0 1 dead-1024x576.argb
feed idle 0 1 

# Define feed #1, set geometry to 704x576, define as live, set idle time
# to 100 frames and set idle image, scale to 1/2 and specify control socket
feed add 1 Feed #1
feed geometry 1 704 576
feed live 1
feed idle 1 100 ../frames/dead-704x576.argb
feed scale 1 1 2
feed socket 1 /tmp/feed1-control-pipe

# Define feed #2, set geometry to 704x576, define as live, set idle time
# to 100 frames and set idle image, scale to 1/2 and specify control socket
feed add 2 Feed #2
feed geometry 2 704 576
feed live 2
feed idle 2 100 ../frames/dead-704x576.argb
feed scale 2 1 2
feed socket 2 /tmp/feed2-control-pipe

# Define feed #3, set geometry to 704x576, define as live, set idle time
# to 100 frames and set idle image, scale to 1/2 and specify control socket
feed add 3 Feed #3
feed geometry 3 704 576
feed live 3
feed idle 3 100 ../frames/dead-1024x576.argb
feed scale 3 1 3
feed socket 3 /tmp/feed3-control-pipe

# Define feed #3, set geometry to 704x576, define as live, set idle time
# to 100 frames and set idle image, set scaling to 1/1 and specify control
# socket
feed add 4 Feed #4 1024x576
feed geometry 4 1024 576
feed live 4
feed idle 4 100 ../frames/dead-1024x576.argb
feed scale 4 1 3
feed socket 4 /tmp/feed4-control-pipe

# Set basic cutout
# Center feed #1 (previously scaled to 1/2) omitting 16 pixels to the left
# and right and omitting 96 pixels at top and bottom, then place it at 704,0
feed cutout 1 16 96 320 192
feed shift 1 704 0

# Center feed #2 (previously scaled to 1/2) omitting 16 pixels to the left
# and right and omitting 96 pixels at top and bottom, then place it at 704,0
feed cutout 2 16 96 340 192
feed shift 2 704 192

# Center feed #3 (previously scaled to 1/2) omitting 16 pixels to the left
# and right and omitting 96 pixels at top and bottom, then place it at 704,0
feed cutout 3 16 96 320 192
feed shift 3 704 384

# Feed 4 (previously scaled 1/1) is placed at 0,0 with full width and height
feed cutout 4 0 0 1024 576
feed shift 4 0 0

# Stack feed 0-4 in the order given
stack  0 4 1 2 3

# Load a transparent image and place it at 4,4
image load 0 ../images/cs-logo-black-64x64-trans.png
image place 0 0 4 4

command create feed_0
  virtual feed add 0 First Feed
  virtual feed source feed 0 1
  loop
command end feed_4
command create feed_1
  virtual feed add 1 First Feed
  virtual feed source feed 1 1
  loop
command end feed_1
command create feed_2
  virtual feed add 2 First Feed
  virtual feed source feed 2 1
  loop
command end feed_2
command create feed_3
  virtual feed add 3 First Feed
  virtual feed source feed 3 1
  loop
command end feed_3

command create test_setup
  feed_0
  text string 0 test
  text string 1 test
  text font 0 Sans Bold 12
  # We dont loop, so we will not continue
command end test_setup

command create test

  virtual feed place rect 0 0 0 320 288 16 0 0.000000 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 8 3 320 288 16 0 0.017453 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 16 6 320 288 16 0 0.034907 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 24 9 320 288 16 0 0.052360 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 32 13 320 288 16 0 0.069813 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 40 16 320 288 16 0 0.087266 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 48 19 320 288 16 0 0.104720 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 56 22 320 288 16 0 0.122173 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 64 26 320 288 16 0 0.139626 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 72 29 320 288 16 0 0.157080 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 80 32 320 288 16 0 0.174533 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 88 36 320 288 16 0 0.191986 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 96 39 320 288 16 0 0.209440 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 104 42 320 288 16 0 0.226893 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 112 45 320 288 16 0 0.244346 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 120 49 320 288 16 0 0.261799 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 128 52 320 288 16 0 0.279253 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 136 55 320 288 16 0 0.296706 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 144 58 320 288 16 0 0.314159 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 152 62 320 288 16 0 0.331613 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 160 65 320 288 16 0 0.349066 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 168 68 320 288 16 0 0.366519 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 176 72 320 288 16 0 0.383972 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 184 75 320 288 16 0 0.401426 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 192 78 320 288 16 0 0.418879 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 200 81 320 288 16 0 0.436332 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 208 85 320 288 16 0 0.453786 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 216 88 320 288 16 0 0.471239 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 224 91 320 288 16 0 0.488692 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 232 94 320 288 16 0 0.506145 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 240 98 320 288 16 0 0.523599 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 248 101 320 288 16 0 0.541052 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 256 104 320 288 16 0 0.558505 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 264 108 320 288 16 0 0.575959 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 272 111 320 288 16 0 0.593412 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 280 114 320 288 16 0 0.610865 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 288 117 320 288 16 0 0.628319 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 296 121 320 288 16 0 0.645772 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 304 124 320 288 16 0 0.663225 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 312 127 320 288 16 0 0.680678 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 320 130 320 288 16 0 0.698132 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 328 134 320 288 16 0 0.715585 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 336 137 320 288 16 0 0.733038 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 344 140 320 288 16 0 0.750492 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 352 144 320 288 16 0 0.767945 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 360 147 320 288 16 0 0.750492 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 368 150 320 288 16 0 0.733038 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 376 153 320 288 16 0 0.715585 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 384 157 320 288 16 0 0.698132 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 392 160 320 288 16 0 0.680678 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 400 163 320 288 16 0 0.663225 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 408 166 320 288 16 0 0.645772 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 416 170 320 288 16 0 0.628319 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 424 173 320 288 16 0 0.610865 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 432 176 320 288 16 0 0.593412 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 440 180 320 288 16 0 0.575959 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 448 183 320 288 16 0 0.558505 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 456 186 320 288 16 0 0.541052 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 464 189 320 288 16 0 0.523599 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 472 193 320 288 16 0 0.506145 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 480 196 320 288 16 0 0.488692 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 488 199 320 288 16 0 0.471239 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 496 202 320 288 16 0 0.453786 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 504 206 320 288 16 0 0.436332 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 512 209 320 288 16 0 0.418879 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 520 212 320 288 16 0 0.401426 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 528 216 320 288 16 0 0.383972 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 536 219 320 288 16 0 0.366519 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 544 222 320 288 16 0 0.349066 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 552 225 320 288 16 0 0.331613 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 560 229 320 288 16 0 0.314159 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 568 232 320 288 16 0 0.296706 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 576 235 320 288 16 0 0.279253 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 584 238 320 288 16 0 0.261799 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 592 242 320 288 16 0 0.244346 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 600 245 320 288 16 0 0.226893 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 608 248 320 288 16 0 0.209440 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 616 252 320 288 16 0 0.191986 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 624 255 320 288 16 0 0.174533 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 632 258 320 288 16 0 0.157080 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 640 261 320 288 16 0 0.139626 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 648 265 320 288 16 0 0.122173 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 656 268 320 288 16 0 0.104720 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 664 271 320 288 16 0 0.087266 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 672 274 320 288 16 0 0.069813 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 680 278 320 288 16 0 0.052360 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 688 281 320 288 16 0 0.034907 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 696 284 320 288 16 0 0.017453 0.5 0.5 1.0
  nextframe
  virtual feed place rect 0 704 288 320 288 16 0 -0.000000 0.5 0.5 1.0
  nextframe
  nextframe
loop 3
  //nextframe 50

  virtual feed place rect 0 0 0 352 288 0 0 0.00 0.5 0.5 1.0
  virtual feed move rotation 0 0.0314 25
  virtual feed move coor 0 3 0 6 6
  nextframe 5
  virtual feed move coor 0 6 1 6 5
  nextframe 5
  virtual feed move coor 0 9 2 6 6
  nextframe 5
  virtual feed move coor 0 12 3 6 6
  nextframe 5
  virtual feed move coor 0 12 4 6 6
  nextframe 5
  virtual feed move coor 0 12 6 35 35
  nextframe 18
  virtual feed move rotation 0 -0.0314 25
  nextframe 5
  virtual feed move coor 0 9 5 6 6
  nextframe 5
  virtual feed move coor 0 5 4 6 6
  nextframe 5
  virtual feed move coor 0 1 3 6 6
  nextframe 5
  virtual feed move coor 0 1 0 6 5
  nextframe 5
  virtual feed move coor 0 0 0 6 6
  nextframe 25
  virtual feed place rect 0 672 288 352 288 0 0 0.00 0.5 0.5 1.0
  virtual feed move coor 0 0 -12 6 24
  nextframe 36
  virtual feed move coor 0 -8 0 84 0
  nextframe 85
  nextframe 25
  virtual feed move scale 0 0.025 0.025 20 20
  virtual feed move clip 0 0 0 22 19 0 0 25 25
  nextframe 25
  virtual feed place rect 0 0 0 704 576 0 0 0.00 1.0 1.0 1.0
  virtual feed move scale 0 0.0 0.0 0 0
  virtual feed move clip 0 0 0 0 0 0 0 0 0
  nextframe 100
  virtual feed move scale 0 -0.025 -0.025 20 20
  nextframe 50

  text string 0 4. Same cutout scaled 50%
  text place 0 0 0 150 0
  text place align 0 center top
  virtual feed place rect 0 0 0 352 288 0 0 0.00 0.5 0.5 1.0
  virtual feed move rotation 0 0.0314 200
  nextframe 200
  text place 0 0 0 554 0
  text place align 0 center top
  virtual feed place rect 0 352 0 352 288 0 0 0.00 0.5 0.5 1.0
  nextframe 30
  text place 0 0 0 554 288
  text place align 0 center top
  virtual feed place rect 0 352 288 352 288 0 0 0.00 0.5 0.5 1.0
  nextframe 30
  text place 0 0 0 150 288
  text place align 0 center top
  virtual feed place rect 0 0 288 352 288 0 0 0.00 0.5 0.5 1.0
  nextframe 30
  text place 0 0 0 150 0
  feed_1
  feed_2
  feed_3
  virtual feed place rect 0 0 0 352 288 0 0 0.00 0.5 0.5 1.0
  virtual feed place rect 1 352 0 352 288 0 0 0.00 0.5 0.5 1.0
  virtual feed place rect 2 352 288 352 288 0 0 0.00 0.5 0.5 1.0
  virtual feed place rect 3 0 288 352 288 0 0 0.00 0.5 0.5 1.0
  nextframe 30
  virtual feed place rect 1
  virtual feed place rect 2
  virtual feed place rect 3
  text string 0
  text string 1

  text string 0 3. Same cutout in 4 places
  text place 0 0 0 150 0
  text place align 0 center top
  virtual feed place rect 0 0 0 300 288 0 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 554 0
  text place align 0 center top
  virtual feed place rect 0 404 0 300 288 0 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 554 288
  text place align 0 center top
  virtual feed place rect 0 404 288 300 288 0 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 150 288
  text place align 0 center top
  virtual feed place rect 0 0 288 300 288 0 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 150 0
  feed_1
  feed_2
  feed_3
  virtual feed place rect 0 0 0 300 288 0 0 0.00 1.0 1.0 1.0
  virtual feed place rect 1 404 0 300 288 0 0 0.00 1.0 1.0 1.0
  virtual feed place rect 2 404 288 300 288 0 0 0.00 1.0 1.0 1.0
  virtual feed place rect 3 0 288 300 288 0 0 0.00 1.0 1.0 1.0
  nextframe 30
  virtual feed place rect 1
  virtual feed place rect 2
  virtual feed place rect 3
  text string 0
  text string 1

  text string 0 2. Different cutout in 4 places
  text place 0 0 0 150 0
  text place align 0 center top
  virtual feed place rect 0 0 0 300 288 0 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 554 0
  text place align 0 center top
  virtual feed place rect 0 404 0 300 288 404 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 554 288
  text place align 0 center top
  virtual feed place rect 0 404 288 300 288 404 288 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 150 288
  text place align 0 center top
  virtual feed place rect 0 0 288 300 288 0 288 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 150 0
  feed_1
  feed_2
  feed_3
  virtual feed place rect 0 0 0 300 288 0 0 0.00 1.0 1.0 1.0
  virtual feed place rect 1 404 0 300 288 404 0 0.00 1.0 1.0 1.0
  virtual feed place rect 2 404 288 300 288 404 288 0.00 1.0 1.0 1.0
  virtual feed place rect 3 0 288 300 288 0 288 0.00 1.0 1.0 1.0
  nextframe 30
  virtual feed place rect 1
  virtual feed place rect 2
  virtual feed place rect 3
  text string 0
  text string 1

  text string 0 1. Offset Different cutout in 4 places
  text string 1 with offset
  text place 0 0 0 186 36
  text place 1 1 0 150 20
  text place align 0 center top
  text place align 1 center top
  virtual feed place rect 0 36 36 300 288 0 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 554 36
  text place 1 1 0 554 20
  text place align 0 center top
  text place align 1 center top
  virtual feed place rect 0 404 36 300 288 404 0 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 554 288
  text place 1 1 0 554 308
  text place align 0 center top
  text place align 1 center top
  virtual feed place rect 0 404 288 300 288 404 288 0.00 1.0 1.0 1.0
  nextframe 30
  text place 0 0 0 186 288
  text place 1 1 0 186 308
  text place align 0 center top
  text place align 1 center top
  virtual feed place rect 0 36 288 300 288 0 288 0.00 1.0 1.0 1.0
  nextframe 30
  text string 0
  text string 1

  loop
command end test

command create ShowFeeds
  test
  overlay virtual feed 0
  overlay virtual feed 1
  overlay virtual feed 2
  overlay virtual feed 3
  overlay text 0
  overlay text 1
  loop
command end ShowFeeds

overlay finish ShowFeeds

test_setup
